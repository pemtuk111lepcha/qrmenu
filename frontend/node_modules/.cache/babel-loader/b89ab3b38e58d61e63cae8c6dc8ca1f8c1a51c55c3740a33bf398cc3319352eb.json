{"ast":null,"code":"// Removed: import \"../styles/CreateMenu.css\"; // Styles are now embedded below\nimport React,{useState,useEffect,useMemo}from'react';import axios from\"axios\";import\"../styles/CreateMenu.css\";import jsPDF from\"jspdf\";import autoTable from\"jspdf-autotable\";import*as XLSX from\"xlsx\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BACKEND_URL=\"http://localhost:5000\";// Add this line\n// Analytics component that uses orders and menu as props\nconst AnalyticsInsights=_ref=>{let{orders=[],menu=[]}=_ref;// Calculate most viewed categories/dishes\nconst analytics=useMemo(()=>{// Count dish views (orders)\nconst dishCount={};orders.forEach(order=>{(order.items||[]).forEach(item=>{dishCount[item]=(dishCount[item]||0)+1;});});// Sort dishes by count\nconst mostViewedDishes=Object.entries(dishCount).sort((a,b)=>b[1]-a[1]).slice(0,5);// Peak scan times (by hour)\nconst hourCount={};orders.forEach(order=>{if(order.createdAt){const hour=new Date(order.createdAt).getHours();hourCount[hour]=(hourCount[hour]||0)+1;}});const peakHours=Object.entries(hourCount).sort((a,b)=>b[1]-a[1]).slice(0,2).map(_ref2=>{let[hour]=_ref2;return\"\".concat(hour,\":00 - \").concat(parseInt(hour)+1,\":00\");});// Heatmap (simulate with dish count for now)\nconst max=Math.max(...Object.values(dishCount),1);return{mostViewedDishes,peakHours,heatmap:dishCount,max};},[orders]);// --- Export Handlers ---\nconst handleExportPDF=()=>{const doc=new jsPDF();const now=new Date();const dateStr=now.toLocaleDateString()+\" \"+now.toLocaleTimeString();doc.text(\"Orders Report\",14,16);doc.setFontSize(10);doc.setTextColor(\"#888\");doc.text(\"Generated: \".concat(dateStr),14,22);doc.setFontSize(12);doc.setTextColor(\"#222\");autoTable(doc,{startY:28,head:[[\"Date\",\"Table\",\"Items\",\"Status\"]],body:orders.map(order=>[// Show order date from order.date or order.createdAt or fallback to \"-\"\norder.date?new Date(order.date).toLocaleString():order.createdAt?new Date(order.createdAt).toLocaleString():\"-\",order.table||\"-\",Array.isArray(order.items)?order.items.join(\", \"):order.items,order.status||\"-\"])});doc.save(\"orders-report.pdf\");};const handleExportExcel=()=>{const now=new Date();const dateStr=now.toLocaleDateString()+\" \"+now.toLocaleTimeString();const wsData=[[\"Orders Report\"],[\"Generated: \".concat(dateStr)],[],[\"Date\",\"Table\",\"Items\",\"Status\"],...orders.map(order=>[order.date?new Date(order.date).toLocaleString():order.createdAt?new Date(order.createdAt).toLocaleString():\"-\",order.table||\"-\",Array.isArray(order.items)?order.items.join(\", \"):order.items,order.status||\"-\"])];const ws=XLSX.utils.aoa_to_sheet(wsData);const wb=XLSX.utils.book_new();XLSX.utils.book_append_sheet(wb,ws,\"Orders\");XLSX.writeFile(wb,\"orders-report.xlsx\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-insights-container\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"analytics-insights-title\",children:\"Analytics & Insights\"}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"analytics-section-label\",children:\"Most Viewed Dishes\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"analytics-list\",children:[analytics.mostViewedDishes.length===0&&/*#__PURE__*/_jsx(\"li\",{children:\"No data yet.\"}),analytics.mostViewedDishes.map(_ref3=>{let[dish,count]=_ref3;return/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",dish,\" (\",count,\" views)\"]},dish);})]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginBottom:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"span\",{className:\"analytics-section-label\",children:\"Peak Scan Times\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"analytics-list\",children:[analytics.peakHours.length===0&&/*#__PURE__*/_jsx(\"li\",{children:\"No data yet.\"}),analytics.peakHours.map((range,idx)=>/*#__PURE__*/_jsxs(\"li\",{children:[\"\\u2022 \",range]},idx))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"analytics-heatmap-label\",children:\"Customer Interaction Heatmap\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-heatmap-bar\",children:[Object.entries(analytics.heatmap).map(_ref4=>{let[dish,count]=_ref4;return/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-heatmap-bar-segment\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"analytics-heatmap-bar-segment-bar\",style:{height:\"\".concat(count/analytics.max*60+10,\"px\")},title:\"\".concat(dish,\": \").concat(count,\" views\")}),/*#__PURE__*/_jsx(\"span\",{className:\"analytics-heatmap-bar-segment-count\",children:count}),/*#__PURE__*/_jsx(\"span\",{className:\"analytics-heatmap-bar-segment-label\",children:dish})]},dish);}),Object.keys(analytics.heatmap).length===0&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"#fff\",fontWeight:\"bold\",fontSize:12,marginLeft:10},children:\"No data yet.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"analytics-export-btns\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleExportPDF,className:\"analytics-export-btn\",children:\"Export PDF\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExportExcel,className:\"analytics-export-btn\",children:\"Export Excel\"})]})]});};// CreateMenuPage component for adding new food items\nfunction CreateMenuPage(_ref5){let{menu:initialMenu=[],setMenu,onAddItem,onRemoveItem,orders=[]}=_ref5;const[itemName,setItemName]=useState('');const[itemPrice,setItemPrice]=useState('');const[itemImage,setItemImage]=useState(null);const[imagePreview,setImagePreview]=useState('');const[message,setMessage]=useState('');const[menu,setMenuState]=useState(initialMenu);const[orderData,setOrderData]=useState(orders);// <-- Add this line\n// Always fetch menu after add/remove\nconst fetchMenu=async()=>{try{const token=localStorage.getItem(\"token\");const user=JSON.parse(localStorage.getItem(\"user\"));const res=await axios.get(\"/api/menu\",{headers:{Authorization:token?\"Bearer \".concat(token):undefined},params:{userId:user===null||user===void 0?void 0:user.id}});setMenuState(res.data);if(setMenu)setMenu(res.data);}catch(_unused){setMenuState([]);if(setMenu)setMenu([]);}};// Fetch orders from backend\nconst fetchOrders=async()=>{try{const res=await axios.get(\"/api/orders\");// Accept array or {orders: [...]}\nlet ordersArr=[];if(Array.isArray(res.data)){ordersArr=res.data;}else if(res.data&&Array.isArray(res.data.orders)){ordersArr=res.data.orders;}setOrderData(ordersArr);}catch(_unused2){setOrderData([]);}};useEffect(()=>{fetchMenu();fetchOrders();// <-- Fetch orders on mount and refresh\n// eslint-disable-next-line\n},[]);// Handle image file selection\nconst handleImageChange=e=>{const file=e.target.files[0];setItemImage(file);if(file){setImagePreview(URL.createObjectURL(file));}else{setImagePreview('');}};// Function to handle form submission for adding menu item\nconst handleSubmit=async e=>{e.preventDefault();setMessage('');if(!itemName||!itemPrice||!itemImage){setMessage('Please fill in all fields.');return;}const formData=new FormData();formData.append(\"name\",itemName);formData.append(\"price\",itemPrice);formData.append(\"image\",itemImage);try{const token=localStorage.getItem(\"token\");await axios.post(\"/api/menu\",formData,{headers:{Authorization:token?\"Bearer \".concat(token):undefined,\"Content-Type\":\"multipart/form-data\"}});setMessage('Menu item added successfully!');setItemName('');setItemPrice('');setItemImage(null);setImagePreview('');await fetchMenu();// Always refresh menu after add\nif(onAddItem)await onAddItem();}catch(err){setMessage('Failed to add menu item.');}};// Remove handler\nconst handleRemove=async id=>{if(window.confirm(\"Are you sure you want to remove this menu item?\")){await onRemoveItem(id);await fetchMenu();// Always refresh menu after remove\n}};const getImageUrl=image=>{if(!image)return\"\";let relPath=image.replace(/^\\/?uploads\\//,\"\");if(image.startsWith(\"http://\")||image.startsWith(\"https://\")){return image;}if(image.startsWith(\"/uploads/\")||image.startsWith(\"uploads/\")){const parts=relPath.split(\"/\");if(parts.length>1){const filename=encodeURIComponent(parts.pop());return\"\".concat(BACKEND_URL,\"/uploads/\").concat(parts.join(\"/\"),\"/\").concat(filename);}return\"\".concat(BACKEND_URL,\"/uploads/\").concat(encodeURIComponent(relPath));}return\"\".concat(BACKEND_URL,\"/uploads/\").concat(encodeURIComponent(image));};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-menu\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"main-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"menu-header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-div\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header1\",children:\"Create New Menu Item\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"menu-form\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemName\",className:\"label\",children:\"Food Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"itemName\",value:itemName,onChange:e=>setItemName(e.target.value),className:\"input\",placeholder:\"e.g., Spicy Chicken Wings\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemPrice\",className:\"label\",children:\"Price (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"itemPrice\",value:itemPrice,onChange:e=>setItemPrice(e.target.value),className:\"input\",placeholder:\"e.g., 299.00\",step:\"0.01\"// Allow decimal values\n,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"itemImage\",className:\"label\",children:\"Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"itemImage\",accept:\"image/*\",onChange:handleImageChange,className:\"input\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button\",children:\"Add Menu Item\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"mt-4 text-center text-sm font-medium \".concat(message.includes('successfully')?'text-green-600':'text-red-600'),children:message})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"created-item\",style:{position:\"relative\"},children:[/*#__PURE__*/_jsx(\"h1\",{className:\"header\",style:{position:\"sticky\",top:0,background:\"#f7af7e\",zIndex:2,margin:0,padding:\"0.5rem 0 0.5rem 0\"},children:\"Created Menu Items\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"ul\",{style:{listStyle:\"none\",padding:0},children:[menu.length===0&&/*#__PURE__*/_jsx(\"li\",{children:\"No menu items yet.\"}),menu.map(item=>/*#__PURE__*/_jsxs(\"li\",{style:{margin:\"1rem 0\",display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",gap:\"1rem\"},children:[item.image&&/*#__PURE__*/_jsx(\"img\",{src:getImageUrl(item.image),alt:item.name,style:{width:50,height:35,objectFit:\"cover\",borderRadius:4}}),/*#__PURE__*/_jsxs(\"span\",{children:[item.name,\" - \\u20B9\",item.price]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",style:{background:\"#fff\",color:\"brown\",border:\"1px solid brown\",width:\"auto\",padding:\"0.2rem 1rem\",marginLeft:\"1rem\"},onClick:()=>handleRemove(item._id||item.id),children:\"Remove\"})]},item._id||item.id))]})})]})]})}),/*#__PURE__*/_jsx(AnalyticsInsights,{orders:orderData,menu:menu})]});}export default CreateMenuPage;","map":{"version":3,"names":["React","useState","useEffect","useMemo","axios","jsPDF","autoTable","XLSX","jsx","_jsx","jsxs","_jsxs","BACKEND_URL","AnalyticsInsights","_ref","orders","menu","analytics","dishCount","forEach","order","items","item","mostViewedDishes","Object","entries","sort","a","b","slice","hourCount","createdAt","hour","Date","getHours","peakHours","map","_ref2","concat","parseInt","max","Math","values","heatmap","handleExportPDF","doc","now","dateStr","toLocaleDateString","toLocaleTimeString","text","setFontSize","setTextColor","startY","head","body","date","toLocaleString","table","Array","isArray","join","status","save","handleExportExcel","wsData","ws","utils","aoa_to_sheet","wb","book_new","book_append_sheet","writeFile","className","children","style","marginBottom","length","_ref3","dish","count","range","idx","_ref4","height","title","keys","color","fontWeight","fontSize","marginLeft","onClick","CreateMenuPage","_ref5","initialMenu","setMenu","onAddItem","onRemoveItem","itemName","setItemName","itemPrice","setItemPrice","itemImage","setItemImage","imagePreview","setImagePreview","message","setMessage","setMenuState","orderData","setOrderData","fetchMenu","token","localStorage","getItem","user","JSON","parse","res","get","headers","Authorization","undefined","params","userId","id","data","_unused","fetchOrders","ordersArr","_unused2","handleImageChange","e","file","target","files","URL","createObjectURL","handleSubmit","preventDefault","formData","FormData","append","post","err","handleRemove","window","confirm","getImageUrl","image","relPath","replace","startsWith","parts","split","filename","encodeURIComponent","pop","class","onSubmit","encType","htmlFor","type","value","onChange","placeholder","required","step","accept","includes","position","top","background","zIndex","margin","padding","listStyle","display","alignItems","justifyContent","gap","src","alt","name","width","objectFit","borderRadius","price","border","_id"],"sources":["C:/Users/Lenovo/Downloads/projects by pemtuk/qrmenu (2)/qrmenu/qrmenu/frontend/src/components/CreateMenuPage.js"],"sourcesContent":["// Removed: import \"../styles/CreateMenu.css\"; // Styles are now embedded below\r\n\r\nimport React, { useState, useEffect, useMemo } from 'react';\r\nimport axios from \"axios\";\r\nimport \"../styles/CreateMenu.css\";\r\nimport jsPDF from \"jspdf\";\r\nimport autoTable from \"jspdf-autotable\";\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst BACKEND_URL = \"http://localhost:5000\"; // Add this line\r\n\r\n// Analytics component that uses orders and menu as props\r\nconst AnalyticsInsights = ({ orders = [], menu = [] }) => {\r\n  // Calculate most viewed categories/dishes\r\n  const analytics = useMemo(() => {\r\n    // Count dish views (orders)\r\n    const dishCount = {};\r\n    orders.forEach(order => {\r\n      (order.items || []).forEach(item => {\r\n        dishCount[item] = (dishCount[item] || 0) + 1;\r\n      });\r\n    });\r\n    // Sort dishes by count\r\n    const mostViewedDishes = Object.entries(dishCount)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 5);\r\n\r\n    // Peak scan times (by hour)\r\n    const hourCount = {};\r\n    orders.forEach(order => {\r\n      if (order.createdAt) {\r\n        const hour = new Date(order.createdAt).getHours();\r\n        hourCount[hour] = (hourCount[hour] || 0) + 1;\r\n      }\r\n    });\r\n    const peakHours = Object.entries(hourCount)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 2)\r\n      .map(([hour]) => `${hour}:00 - ${parseInt(hour) + 1}:00`);\r\n\r\n    // Heatmap (simulate with dish count for now)\r\n    const max = Math.max(...Object.values(dishCount), 1);\r\n\r\n    return {\r\n      mostViewedDishes,\r\n      peakHours,\r\n      heatmap: dishCount,\r\n      max,\r\n    };\r\n  }, [orders]);\r\n\r\n  // --- Export Handlers ---\r\n  const handleExportPDF = () => {\r\n    const doc = new jsPDF();\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString() + \" \" + now.toLocaleTimeString();\r\n    doc.text(\"Orders Report\", 14, 16);\r\n    doc.setFontSize(10);\r\n    doc.setTextColor(\"#888\");\r\n    doc.text(`Generated: ${dateStr}`, 14, 22);\r\n    doc.setFontSize(12);\r\n    doc.setTextColor(\"#222\");\r\n    autoTable(doc, {\r\n      startY: 28,\r\n      head: [[\"Date\", \"Table\", \"Items\", \"Status\"]],\r\n      body: orders.map(order => [\r\n        // Show order date from order.date or order.createdAt or fallback to \"-\"\r\n        order.date\r\n          ? new Date(order.date).toLocaleString()\r\n          : order.createdAt\r\n            ? new Date(order.createdAt).toLocaleString()\r\n            : \"-\",\r\n        order.table || \"-\",\r\n        Array.isArray(order.items) ? order.items.join(\", \") : order.items,\r\n        order.status || \"-\"\r\n      ]),\r\n    });\r\n    doc.save(\"orders-report.pdf\");\r\n  };\r\n\r\n  const handleExportExcel = () => {\r\n    const now = new Date();\r\n    const dateStr = now.toLocaleDateString() + \" \" + now.toLocaleTimeString();\r\n    const wsData = [\r\n      [\"Orders Report\"],\r\n      [`Generated: ${dateStr}`],\r\n      [],\r\n      [\"Date\", \"Table\", \"Items\", \"Status\"],\r\n      ...orders.map(order => [\r\n        order.date\r\n          ? new Date(order.date).toLocaleString()\r\n          : order.createdAt\r\n            ? new Date(order.createdAt).toLocaleString()\r\n            : \"-\",\r\n        order.table || \"-\",\r\n        Array.isArray(order.items) ? order.items.join(\", \") : order.items,\r\n        order.status || \"-\"\r\n      ]),\r\n    ];\r\n    const ws = XLSX.utils.aoa_to_sheet(wsData);\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, ws, \"Orders\");\r\n    XLSX.writeFile(wb, \"orders-report.xlsx\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"analytics-insights-container\">\r\n      <h3 className=\"analytics-insights-title\">Analytics & Insights</h3>\r\n      <div style={{ marginBottom: \"1.5rem\" }}>\r\n        <span className=\"analytics-section-label\">Most Viewed Dishes</span>\r\n        <ul className=\"analytics-list\">\r\n          {analytics.mostViewedDishes.length === 0 && <li>No data yet.</li>}\r\n          {analytics.mostViewedDishes.map(([dish, count]) => (\r\n            <li key={dish}>• {dish} ({count} views)</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <div style={{ marginBottom: \"1.5rem\" }}>\r\n        <span className=\"analytics-section-label\">Peak Scan Times</span>\r\n        <ul className=\"analytics-list\">\r\n          {analytics.peakHours.length === 0 && <li>No data yet.</li>}\r\n          {analytics.peakHours.map((range, idx) => (\r\n            <li key={idx}>• {range}</li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      <div>\r\n        <span className=\"analytics-heatmap-label\">Customer Interaction Heatmap</span>\r\n        <div className=\"analytics-heatmap-bar\">\r\n          {Object.entries(analytics.heatmap).map(([dish, count]) => (\r\n            <div className=\"analytics-heatmap-bar-segment\" key={dish}>\r\n              <div\r\n                className=\"analytics-heatmap-bar-segment-bar\"\r\n                style={{\r\n                  height: `${(count / analytics.max) * 60 + 10}px`,\r\n                }}\r\n                title={`${dish}: ${count} views`}\r\n              ></div>\r\n              <span className=\"analytics-heatmap-bar-segment-count\">{count}</span>\r\n              <span className=\"analytics-heatmap-bar-segment-label\">{dish}</span>\r\n            </div>\r\n          ))}\r\n          {Object.keys(analytics.heatmap).length === 0 && (\r\n            <span style={{ color: \"#fff\", fontWeight: \"bold\", fontSize: 12, marginLeft: 10 }}>\r\n              No data yet.\r\n            </span>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <div className=\"analytics-export-btns\">\r\n        <button onClick={handleExportPDF} className=\"analytics-export-btn\">\r\n          Export PDF\r\n        </button>\r\n        <button onClick={handleExportExcel} className=\"analytics-export-btn\">\r\n          Export Excel\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// CreateMenuPage component for adding new food items\r\nfunction CreateMenuPage({ menu: initialMenu = [], setMenu, onAddItem, onRemoveItem, orders = [] }) {\r\n  const [itemName, setItemName] = useState('');\r\n  const [itemPrice, setItemPrice] = useState('');\r\n  const [itemImage, setItemImage] = useState(null);\r\n  const [imagePreview, setImagePreview] = useState('');\r\n  const [message, setMessage] = useState('');\r\n  const [menu, setMenuState] = useState(initialMenu);\r\n  const [orderData, setOrderData] = useState(orders); // <-- Add this line\r\n\r\n  // Always fetch menu after add/remove\r\n  const fetchMenu = async () => {\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      const user = JSON.parse(localStorage.getItem(\"user\"));\r\n      const res = await axios.get(\"/api/menu\", {\r\n        headers: {\r\n          Authorization: token ? `Bearer ${token}` : undefined,\r\n        },\r\n        params: {\r\n          userId: user?.id,\r\n        },\r\n      });\r\n      setMenuState(res.data);\r\n      if (setMenu) setMenu(res.data);\r\n    } catch {\r\n      setMenuState([]);\r\n      if (setMenu) setMenu([]);\r\n    }\r\n  };\r\n\r\n  // Fetch orders from backend\r\n  const fetchOrders = async () => {\r\n    try {\r\n      const res = await axios.get(\"/api/orders\");\r\n      // Accept array or {orders: [...]}\r\n      let ordersArr = [];\r\n      if (Array.isArray(res.data)) {\r\n        ordersArr = res.data;\r\n      } else if (res.data && Array.isArray(res.data.orders)) {\r\n        ordersArr = res.data.orders;\r\n      }\r\n      setOrderData(ordersArr);\r\n    } catch {\r\n      setOrderData([]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchMenu();\r\n    fetchOrders(); // <-- Fetch orders on mount and refresh\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  // Handle image file selection\r\n  const handleImageChange = (e) => {\r\n    const file = e.target.files[0];\r\n    setItemImage(file);\r\n    if (file) {\r\n      setImagePreview(URL.createObjectURL(file));\r\n    } else {\r\n      setImagePreview('');\r\n    }\r\n  };\r\n\r\n  // Function to handle form submission for adding menu item\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setMessage('');\r\n    if (!itemName || !itemPrice || !itemImage) {\r\n      setMessage('Please fill in all fields.');\r\n      return;\r\n    }\r\n    const formData = new FormData();\r\n    formData.append(\"name\", itemName);\r\n    formData.append(\"price\", itemPrice);\r\n    formData.append(\"image\", itemImage);\r\n\r\n    try {\r\n      const token = localStorage.getItem(\"token\");\r\n      await axios.post(\"/api/menu\", formData, {\r\n        headers: {\r\n          Authorization: token ? `Bearer ${token}` : undefined,\r\n          \"Content-Type\": \"multipart/form-data\",\r\n        },\r\n      });\r\n      setMessage('Menu item added successfully!');\r\n      setItemName('');\r\n      setItemPrice('');\r\n      setItemImage(null);\r\n      setImagePreview('');\r\n      await fetchMenu(); // Always refresh menu after add\r\n      if (onAddItem) await onAddItem();\r\n    } catch (err) {\r\n      setMessage('Failed to add menu item.');\r\n    }\r\n  };\r\n\r\n  // Remove handler\r\n  const handleRemove = async (id) => {\r\n    if (window.confirm(\"Are you sure you want to remove this menu item?\")) {\r\n      await onRemoveItem(id);\r\n      await fetchMenu(); // Always refresh menu after remove\r\n    }\r\n  };\r\n\r\n  const getImageUrl = (image) => {\r\n    if (!image) return \"\";\r\n    let relPath = image.replace(/^\\/?uploads\\//, \"\");\r\n    if (image.startsWith(\"http://\") || image.startsWith(\"https://\")) {\r\n      return image;\r\n    }\r\n    if (image.startsWith(\"/uploads/\") || image.startsWith(\"uploads/\")) {\r\n      const parts = relPath.split(\"/\");\r\n      if (parts.length > 1) {\r\n        const filename = encodeURIComponent(parts.pop());\r\n        return `${BACKEND_URL}/uploads/${parts.join(\"/\")}/${filename}`;\r\n      }\r\n      return `${BACKEND_URL}/uploads/${encodeURIComponent(relPath)}`;\r\n    }\r\n    return `${BACKEND_URL}/uploads/${encodeURIComponent(image)}`;\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"main-menu\">\r\n        <div class=\"main-div\">\r\n          <div className=\"menu-header\">\r\n            <div className=\"form-div\">\r\n              <h1 className=\"header1\">\r\n                Create New Menu Item\r\n              </h1>\r\n              <form onSubmit={handleSubmit} className=\"menu-form\" encType=\"multipart/form-data\">\r\n                {/* Item Name */}\r\n                <div>\r\n                  <label htmlFor=\"itemName\" className=\"label\">\r\n                    Food Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"itemName\"\r\n                    value={itemName}\r\n                    onChange={(e) => setItemName(e.target.value)}\r\n                    className=\"input\"\r\n                    placeholder=\"e.g., Spicy Chicken Wings\"\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Item Price */}\r\n                <div>\r\n                  <label htmlFor=\"itemPrice\" className=\"label\">\r\n                    Price (₹)\r\n                  </label>\r\n                  <input\r\n                    type=\"number\"\r\n                    id=\"itemPrice\"\r\n                    value={itemPrice}\r\n                    onChange={(e) => setItemPrice(e.target.value)}\r\n                    className=\"input\"\r\n                    placeholder=\"e.g., 299.00\"\r\n                    step=\"0.01\" // Allow decimal values\r\n                    required\r\n                  />\r\n                </div>\r\n\r\n                {/* Image Upload */}\r\n                <div>\r\n                  <label htmlFor=\"itemImage\" className=\"label\">\r\n                    Image\r\n                  </label>\r\n                  <input\r\n                    type=\"file\"\r\n                    id=\"itemImage\"\r\n                    accept=\"image/*\"\r\n                    onChange={handleImageChange}\r\n                    className=\"input\"\r\n                    required\r\n                  />\r\n                  {/* Removed image preview */}\r\n                </div>\r\n                {/* Submission Button */}\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"button\"\r\n                >\r\n                  Add Menu Item\r\n                </button>\r\n                {/* Message display for success/error */}\r\n                {message && (\r\n                  <p className={`mt-4 text-center text-sm font-medium ${message.includes('successfully') ? 'text-green-600' : 'text-red-600'}`}>\r\n                    {message}\r\n                  </p>\r\n                )}\r\n              </form>\r\n            </div>\r\n          </div>\r\n          {/* Created Items section */}\r\n          <div className=\"created-item\" style={{ position: \"relative\" }}>\r\n            <h1\r\n              className=\"header\"\r\n              style={{\r\n                position: \"sticky\",\r\n                top: 0,\r\n                background: \"#f7af7e\",\r\n                zIndex: 2,\r\n                margin: 0,\r\n                padding: \"0.5rem 0 0.5rem 0\"\r\n              }}\r\n            >\r\n              Created Menu Items\r\n            </h1>\r\n            <div>\r\n              <ul style={{ listStyle: \"none\", padding: 0 }}>\r\n                {menu.length === 0 && <li>No menu items yet.</li>}\r\n                {menu.map(item => (\r\n                  <li key={item._id || item.id} style={{ margin: \"1rem 0\", display: \"flex\", alignItems: \"center\", justifyContent: \"space-between\" }}>\r\n                    <div style={{ display: \"flex\", alignItems: \"center\", gap: \"1rem\" }}>\r\n                      {item.image && <img src={getImageUrl(item.image)} alt={item.name} style={{ width: 50, height: 35, objectFit: \"cover\", borderRadius: 4 }} />}\r\n                      <span>{item.name} - ₹{item.price}</span>\r\n                    </div>\r\n                    <button\r\n                      className=\"button\"\r\n                      style={{ background: \"#fff\", color: \"brown\", border: \"1px solid brown\", width: \"auto\", padding: \"0.2rem 1rem\", marginLeft: \"1rem\" }}\r\n                      onClick={() => handleRemove(item._id || item.id)}\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          </div>\r\n          {/* Back to Menu button */}\r\n          {/* <button\r\n              onClick={onBackToMenu}\r\n              className=\"button2\"\r\n            >\r\n              Back to Menu\r\n            </button> */}\r\n        </div>\r\n      </div>\r\n      <AnalyticsInsights orders={orderData} menu={menu} />\r\n    </div >\r\n  );\r\n}\r\n\r\nexport default CreateMenuPage;\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}