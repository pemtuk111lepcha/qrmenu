{"ast":null,"code":"import _objectSpread from\"C:/Users/Lenovo/Downloads/projects by pemtuk/qrmenu (2)/qrmenu/qrmenu/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import\"../styles/OrderPage.css\";import orderBg from\"../img/orderbg.jpg\";// OrdersTable component for displaying orders in a table\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrdersTable=_ref=>{let{orders}=_ref;return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:800,margin:\"2rem auto\",background:\"#fff\",borderRadius:8,boxShadow:\"0 2px 12px rgba(0,0,0,0.07)\",padding:\"1.5rem\"},children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:\"center\",color:\"#2575fc\",marginBottom:\"1rem\"},children:\"All Orders\"}),/*#__PURE__*/_jsxs(\"table\",{style:{width:\"100%\",borderCollapse:\"collapse\",fontSize:\"1rem\"},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{style:{background:\"#f7af7e\",color:\"#fff\"},children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:\"0.7rem\",borderRadius:\"6px 0 0 0\"},children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"0.7rem\"},children:\"Table\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"0.7rem\"},children:\"Items\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"0.7rem\"},children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:\"0.7rem\",borderRadius:\"0 6px 0 0\"},children:\"Complete\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[orders.length===0&&/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:5,style:{textAlign:\"center\",padding:\"1.2rem\"},children:\"No orders yet.\"})}),orders.map((order,idx)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderBottom:\"1px solid #eee\"},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.7rem\",color:\"#444\"},children:order.createdAt?new Date(order.createdAt).toLocaleString():\"-\"}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.7rem\",color:\"#444\"},children:order.table||\"-\"}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.7rem\",color:\"#444\"},children:Array.isArray(order.items)?order.items.join(\", \"):order.items}),/*#__PURE__*/_jsx(\"td\",{style:{padding:\"0.7rem\",color:order.status===\"Completed\"?\"#22c55e\":\"#f97316\",fontWeight:\"bold\"},children:order.status||\"-\"}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:\"0.7rem\",textAlign:\"center\"},children:[order.status!==\"Completed\"&&/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",title:\"Mark as Completed\",onChange:()=>order.handleComplete(order._id||order.id),style:{width:\"18px\",height:\"18px\"}}),order.status===\"Completed\"&&/*#__PURE__*/_jsx(\"span\",{style:{color:\"#22c55e\",fontWeight:\"bold\"},children:\"\\u2713\"})]})]},order._id||order.id||idx))]})]})]});};const OrdersPage=()=>{const[orders,setOrders]=useState([]);useEffect(()=>{// Fetch orders from backend on mount\nconst fetchOrders=async()=>{try{const res=await axios.get(\"/api/orders\");let ordersArr=[];if(Array.isArray(res.data)){ordersArr=res.data;}else if(res.data&&Array.isArray(res.data.orders)){ordersArr=res.data.orders;}else if(res.data&&res.data.data&&Array.isArray(res.data.data)){ordersArr=res.data.data;}// Attach handleComplete to each order for the table\nsetOrders(ordersArr.map(order=>_objectSpread(_objectSpread({},order),{},{handleComplete:handleComplete})));}catch(err){setOrders([]);}};fetchOrders();// eslint-disable-next-line\n},[]);const handleComplete=async id=>{await axios.patch(\"/api/orders/\".concat(id),{status:\"Completed\"});setOrders(prev=>prev.map(order=>order._id===id?_objectSpread(_objectSpread({},order),{},{status:\"Completed\"}):order));};return/*#__PURE__*/_jsx(\"div\",{className:\"orders-section\",style:{backgroundImage:\"url('\".concat(orderBg,\"')\"),backgroundRepeat:\"no-repeat\",backgroundPosition:\"center 2rem\",backgroundSize:\"cover\",alignContent:\"center\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",minHeight:\"800px\",color:\"white\"},children:/*#__PURE__*/_jsx(OrdersTable,{orders:orders})});};export default OrdersPage;","map":{"version":3,"names":["React","useEffect","useState","axios","orderBg","jsx","_jsx","jsxs","_jsxs","OrdersTable","_ref","orders","style","maxWidth","margin","background","borderRadius","boxShadow","padding","children","textAlign","color","marginBottom","width","borderCollapse","fontSize","length","colSpan","map","order","idx","borderBottom","createdAt","Date","toLocaleString","table","Array","isArray","items","join","status","fontWeight","type","title","onChange","handleComplete","_id","id","height","OrdersPage","setOrders","fetchOrders","res","get","ordersArr","data","_objectSpread","err","patch","concat","prev","className","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","alignContent","display","flexDirection","alignItems","minHeight"],"sources":["C:/Users/Lenovo/Downloads/projects by pemtuk/qrmenu (2)/qrmenu/qrmenu/frontend/src/components/OrdersPage.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport \"../styles/OrderPage.css\";\r\nimport orderBg from \"../img/orderbg.jpg\";\r\n\r\n// OrdersTable component for displaying orders in a table\r\nconst OrdersTable = ({ orders }) => (\r\n  <div\r\n    style={{\r\n      maxWidth: 800,\r\n      margin: \"2rem auto\",\r\n      background: \"#fff\",\r\n      borderRadius: 8,\r\n      boxShadow: \"0 2px 12px rgba(0,0,0,0.07)\",\r\n      padding: \"1.5rem\",\r\n    }}\r\n  >\r\n    <h2\r\n      style={{\r\n        textAlign: \"center\",\r\n        color: \"#2575fc\",\r\n        marginBottom: \"1rem\",\r\n      }}\r\n    >\r\n      All Orders\r\n    </h2>\r\n    <table\r\n      style={{\r\n        width: \"100%\",\r\n        borderCollapse: \"collapse\",\r\n        fontSize: \"1rem\",\r\n      }}\r\n    >\r\n      <thead>\r\n        <tr\r\n          style={{\r\n            background: \"#f7af7e\",\r\n            color: \"#fff\",\r\n          }}\r\n        >\r\n          <th\r\n            style={{\r\n              padding: \"0.7rem\",\r\n              borderRadius: \"6px 0 0 0\",\r\n            }}\r\n          >\r\n            Date\r\n          </th>\r\n          <th style={{ padding: \"0.7rem\" }}>Table</th>\r\n          <th style={{ padding: \"0.7rem\" }}>Items</th>\r\n          <th style={{ padding: \"0.7rem\" }}>Status</th>\r\n          <th\r\n            style={{\r\n              padding: \"0.7rem\",\r\n              borderRadius: \"0 6px 0 0\",\r\n            }}\r\n          >\r\n            Complete\r\n          </th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {orders.length === 0 && (\r\n          <tr>\r\n            <td\r\n              colSpan={5}\r\n              style={{\r\n                textAlign: \"center\",\r\n                padding: \"1.2rem\",\r\n              }}\r\n            >\r\n              No orders yet.\r\n            </td>\r\n          </tr>\r\n        )}\r\n        {orders.map((order, idx) => (\r\n          <tr\r\n            key={order._id || order.id || idx}\r\n            style={{\r\n              borderBottom: \"1px solid #eee\",\r\n            }}\r\n          >\r\n            <td\r\n              style={{\r\n                padding: \"0.7rem\",\r\n                color: \"#444\",\r\n              }}\r\n            >\r\n              {order.createdAt\r\n                ? new Date(order.createdAt).toLocaleString()\r\n                : \"-\"}\r\n            </td>\r\n            <td\r\n              style={{\r\n                padding: \"0.7rem\",\r\n                color: \"#444\",\r\n              }}\r\n            >\r\n              {order.table || \"-\"}\r\n            </td>\r\n            <td\r\n              style={{\r\n                padding: \"0.7rem\",\r\n                color: \"#444\",\r\n              }}\r\n            >\r\n              {Array.isArray(order.items)\r\n                ? order.items.join(\", \")\r\n                : order.items}\r\n            </td>\r\n            <td\r\n              style={{\r\n                padding: \"0.7rem\",\r\n                color:\r\n                  order.status === \"Completed\"\r\n                    ? \"#22c55e\"\r\n                    : \"#f97316\",\r\n                fontWeight: \"bold\",\r\n              }}\r\n            >\r\n              {order.status || \"-\"}\r\n            </td>\r\n            <td\r\n              style={{\r\n                padding: \"0.7rem\",\r\n                textAlign: \"center\",\r\n              }}\r\n            >\r\n              {order.status !== \"Completed\" && (\r\n                <input\r\n                  type=\"checkbox\"\r\n                  title=\"Mark as Completed\"\r\n                  onChange={() =>\r\n                    order.handleComplete(order._id || order.id)\r\n                  }\r\n                  style={{\r\n                    width: \"18px\",\r\n                    height: \"18px\",\r\n                  }}\r\n                />\r\n              )}\r\n              {order.status === \"Completed\" && (\r\n                <span\r\n                  style={{\r\n                    color: \"#22c55e\",\r\n                    fontWeight: \"bold\",\r\n                  }}\r\n                >\r\n                  âœ“\r\n                </span>\r\n              )}\r\n            </td>\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n);\r\n\r\nconst OrdersPage = () => {\r\n  const [orders, setOrders] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Fetch orders from backend on mount\r\n    const fetchOrders = async () => {\r\n      try {\r\n        const res = await axios.get(\"/api/orders\");\r\n        let ordersArr = [];\r\n        if (Array.isArray(res.data)) {\r\n          ordersArr = res.data;\r\n        } else if (res.data && Array.isArray(res.data.orders)) {\r\n          ordersArr = res.data.orders;\r\n        } else if (res.data && res.data.data && Array.isArray(res.data.data)) {\r\n          ordersArr = res.data.data;\r\n        }\r\n        // Attach handleComplete to each order for the table\r\n        setOrders(\r\n          ordersArr.map((order) => ({\r\n            ...order,\r\n            handleComplete: handleComplete,\r\n          }))\r\n        );\r\n      } catch (err) {\r\n        setOrders([]);\r\n      }\r\n    };\r\n    fetchOrders();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const handleComplete = async (id) => {\r\n    await axios.patch(`/api/orders/${id}`, { status: \"Completed\" });\r\n    setOrders((prev) =>\r\n      prev.map((order) =>\r\n        order._id === id ? { ...order, status: \"Completed\" } : order\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"orders-section\"\r\n      style={{\r\n        backgroundImage: `url('${orderBg}')`,\r\n        backgroundRepeat: \"no-repeat\",\r\n        backgroundPosition: \"center 2rem\",\r\n        backgroundSize: \"cover\",\r\n        alignContent: \"center\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        minHeight: \"800px\",\r\n        color: \"white\",\r\n      }}\r\n    >\r\n      <OrdersTable orders={orders} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrdersPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}